<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.iris.team.dao.OhProjectLogDao">

    <resultMap type="com.iris.team.entity.OhProjectLogEntity" id="ohProjectLogMap">
        <result property="id" column="id"/>
        <result property="projectId" column="project_id"/>
        <result property="taskId" column="task_id"/>
        <result property="operation" column="operation"/>
        <result property="remark" column="remark"/>
        <result property="dbStatus" column="db_status"/>
        <result property="creator" column="creator"/>
        <result property="createTime" column="create_time"/>
        <result property="updater" column="updater"/>
        <result property="updateTime" column="update_time"/>
    </resultMap>

    <select id="getList" resultType="com.iris.team.entity.OhProjectLogEntity">
        select * from oh_work_order where db_status = 1
    </select>

    <insert id="save">
        INSERT INTO oh_work_order (order_code, order_source, report_time, incident_time, end_time, title, comment, address, geo_x, geo_y, category, note, db_status, creator,create_time)
        VALUES (#{orderCode}, #{orderSource}, #{reportTime}, #{incidentTime}, #{endTime}, #{title}, #{comment}, #{address}, #{geoX}, #{geoY}, #{category}, #{note}, #{dbStatus}, #{creator},#{createTime})
    </insert>

    <update id="updateById">
        UPDATE oh_work_order
        <set>
            <if test="orderCode != null and orderCode != ''">order_code = #{orderCode},</if>
            <if test="orderSource != null and orderSource != ''">order_source = #{orderSource},</if>
            <if test="reportTime != null and reportTime != ''">report_time = #{reportTime},</if>
            <if test="incidentTime != null and incidentTime != ''">incident_time = #{incidentTime},</if>
            <if test="endTime != null and endTime != ''">end_time = #{endTime},</if>
            <if test="title != null and title != ''">title = #{title},</if>
            <if test="comment != null and comment != ''">comment = #{comment},</if>
            <if test="address != null and address != ''">address = #{address},</if>
            <if test="geoX != null">geo_x = #{geoX},</if>
            <if test="geoY != null">geo_y = #{geoY},</if>
            <if test="category != null">category = #{category},</if>
            <if test="note != null and note != ''">note = #{note},</if>
            <if test="dbStatus != null">db_status = #{dbStatus},</if>
            <if test="updater != null">updater = #{updater},</if>
            update_time = #{updateTime}
        </set>
        WHERE id = #{id}
    </update>

</mapper>